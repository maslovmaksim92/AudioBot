# üöÄ PRE-DEPLOY CHECKLIST - –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø RENDER –ü–†–û–ë–õ–ï–ú

## ‚ùå –û–ë–ù–ê–†–£–ñ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –ù–ê RENDER:

### 1. **–°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –∫–æ–¥–∞ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–∞**
- Endpoint `/api/cleaning/production-debug` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404
- `management_company` –≤—Å–µ –µ—â–µ null
- –ù–æ–≤—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å

### 2. **DATABASE_URL –ø—Ä–æ–±–ª–µ–º–∞**
```
‚ùå Database initialization failed: [Errno -2] Name or service not known
```
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –°–î–ï–õ–ê–ù–´:

### **A. –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–æ—Å—Ç–æ–π version check endpoint**
```bash
curl https://audiobot-qci2.onrender.com/api/version-check
```
**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:**
```json
{
  "status": "success", 
  "version": "3.0-FIXED",
  "features": {
    "management_companies_fixed": true,
    "september_schedules": true,
    "490_houses_loading": true
  }
}
```

### **B. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ DATABASE_URL –ª–æ–≥–∏–∫–∞**
- –£–±—Ä–∞–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–∞—è DATABASE_URL –∏–∑ .env —Ñ–∞–π–ª–∞
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º Render
- Fallback –ª–æ–≥–∏–∫–∞ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### **C. BitrixService —Å—Ç–∞–ª DB-–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º**
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ø–∞–º—è—Ç–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `analyze_house_brigade()` –¥–ª—è –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- –†–µ–∑–µ—Ä–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –µ—Å–ª–∏ –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞

## üéØ –ü–û–°–õ–ï –î–ï–ü–õ–û–Ø –ü–†–û–í–ï–†–ò–¢–¨:

### **1. –í–µ—Ä—Å–∏—è –∫–æ–¥–∞:**
```bash
curl https://audiobot-qci2.onrender.com/api/version-check
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å "version": "3.0-FIXED"
```

### **2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –£–ö:**
```bash
curl https://audiobot-qci2.onrender.com/api/cleaning/houses?limit=1 | jq '.houses[0].management_company'
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –£–ö, –ù–ï null
```

### **3. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–º–æ–≤:**
```bash
curl https://audiobot-qci2.onrender.com/api/cleaning/houses | jq '.total'
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å 490, –ù–ï 348
```

### **4. –ù–æ–≤—ã–µ endpoints:**
```bash
curl https://audiobot-qci2.onrender.com/api/cleaning/production-debug
# –î–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ 404
```

## üö® –ï–°–õ–ò –ü–†–û–ë–õ–ï–ú–´ –û–°–¢–ê–Æ–¢–°–Ø:

### **–í–∞—Ä–∏–∞–Ω—Ç 1: Force rebuild**
- –í Render Dashboard –Ω–∞–∂–∞—Ç—å "Clear build cache"
- –ó–∞—Ç–µ–º "Manual Deploy"

### **–í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å environment variables**
- `DATABASE_URL` –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–∞–Ω–∞ Render
- `BITRIX24_WEBHOOK_URL` –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
- `CORS_ORIGINS` –Ω–µ –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å localhost

### **–í–∞—Ä–∏–∞–Ω—Ç 3: –õ–æ–≥–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –¥–µ–ø–ª–æ—è –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ build
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å

## üìã –§–ò–ù–ê–õ–¨–ù–´–ô –°–¢–ê–¢–£–°:

- ‚úÖ **Version check endpoint** –¥–æ–±–∞–≤–ª–µ–Ω
- ‚úÖ **DATABASE_URL –ª–æ–≥–∏–∫–∞** –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞  
- ‚úÖ **BitrixService** —Å—Ç–∞–ª –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º –æ—Ç –ë–î
- ‚úÖ **–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –£–ö/–¥–æ–º–æ–≤** –Ω–∞ –º–µ—Å—Ç–µ
- ‚úÖ **CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

**–ì–û–¢–û–í–û –ö –ü–û–í–¢–û–†–ù–û–ú–£ –î–ï–ü–õ–û–Æ! üöÄ**