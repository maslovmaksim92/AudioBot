# üß† –ú–æ–¥—É–ª—å —Å–∞–º–æ–æ–±—É—á–µ–Ω–∏—è VasDom AudioBot

## üìã –û–±–∑–æ—Ä

–ú–æ–¥—É–ª—å —Å–∞–º–æ–æ–±—É—á–µ–Ω–∏—è –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç VasDom AudioBot –≤ –∞–¥–∞–ø—Ç–∏–≤–Ω—É—é AI —Å–∏—Å—Ç–µ–º—É, –∫–æ—Ç–æ—Ä–∞—è:
- **–£—á–∏—Ç—Å—è –Ω–∞ –æ—Ç–∑—ã–≤–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** 
- **–£–ª—É—á—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤** —á–µ—Ä–µ–∑ –ø–æ–∏—Å–∫ –≤ –∏—Å—Ç–æ—Ä–∏–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–æ–±—É—á–∞–µ—Ç—Å—è** –ø—Ä–∏ —Å–Ω–∏–∂–µ–Ω–∏–∏ –∫–∞—á–µ—Å—Ç–≤–∞
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏** –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –∑–∞—Ç—Ä–∞—Ç

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

### üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)
```sql
-- –õ–æ–≥–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π —Å AI
voice_logs (id, user_message, ai_response, rating, feedback_text, ...)

-- –í–µ–∫—Ç–æ—Ä–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞
voice_embeddings (id, log_id, vector, embedding_model, ...)

-- –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –º–æ–¥–µ–ª–µ–π
model_metrics (id, model_version, avg_rating, accuracy_score, ...)

-- –î–∞—Ç–∞—Å–µ—Ç—ã –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
training_datasets (id, dataset_name, total_samples, status, ...)
```

### üîß –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

#### 1. **–°–µ—Ä–≤–∏—Å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤** (`app/services/embedding_service.py`)
- –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π —Å `sentence-transformers`
- –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ –∫–æ—Å–∏–Ω—É—Å–Ω–æ–º—É —Å—Ö–æ–¥—Å—Ç–≤—É
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤

#### 2. **AI —Å–µ—Ä–≤–∏—Å** (`app/services/ai_service.py`)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Emergent LLM (GPT-4 mini)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –¥–æ–æ–±—É—á–µ–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –ø–æ–∏—Å–∫ –≤ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–æ–≤

#### 3. **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö** (`training/export_logs.py`)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –æ—Ü–µ–Ω–∫–∞–º (‚â•4 –∑–≤–µ–∑–¥—ã)
- –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSONL –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö

#### 4. **–î–æ–æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π** (`training/fine_tune.py`)
- Fine-tuning —á–µ—Ä–µ–∑ Transformers (DialoGPT, Llama)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –≤–µ—Å–æ–≤
- –ú–µ—Ç—Ä–∏–∫–∏ –æ–±—É—á–µ–Ω–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

#### 5. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞** (`deploy/cron_tasks.py`)
- –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –º–æ–¥–µ–ª–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è
- –°–∏—Å—Ç–µ–º—ã –∞–ª–µ—Ä—Ç–æ–≤ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
cd backend

# –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã)
pip install -r requirements.txt

# ML –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Å–∞–º–æ–æ–±—É—á–µ–Ω–∏—è
pip install -r requirements_ml.txt

# –ò–ª–∏ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏:
pip install sentence-transformers transformers torch scikit-learn
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
createdb vasdom_audio

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ .env
DATABASE_URL=postgresql://user:password@localhost:5432/vasdom_audio
```

### 3. –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
cd backend

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü —á–µ—Ä–µ–∑ Alembic
alembic revision --autogenerate -m "Add self-learning tables"
alembic upgrade head
```

### 4. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# backend/.env
DATABASE_URL=postgresql://localhost:5432/vasdom_audio
EMERGENT_LLM_KEY=sk-or-v1-your-key
USE_LOCAL_MODEL=false
EMBEDDING_MODEL=sentence-transformers/paraphrase-multilingual-MiniLM-L6-v2
MIN_RATING_THRESHOLD=4
RETRAINING_THRESHOLD=3.5
EVALUATION_SCHEDULE_DAYS=7
```

## üì° API Endpoints

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å–∞–º–æ–æ–±—É—á–µ–Ω–∏—è

#### üó£Ô∏è –ì–æ–ª–æ—Å–æ–≤–æ–π —á–∞—Ç
```http
POST /api/voice/process
Content-Type: application/json

{
  "message": "–ö–∞–∫ —á–∞—Å—Ç–æ –Ω—É–∂–Ω–æ —É–±–∏—Ä–∞—Ç—å—Å—è –≤ –ø–æ–¥—ä–µ–∑–¥–∞—Ö?",
  "session_id": "user123"
}

Response:
{
  "response": "–°–æ–≥–ª–∞—Å–Ω–æ –Ω–æ—Ä–º–∞—Ç–∏–≤–∞–º, —É–±–æ—Ä–∫–∞ –ø–æ–¥—ä–µ–∑–¥–æ–≤...",
  "log_id": 42,
  "session_id": "user123",
  "model_used": "gpt-4-mini",
  "response_time": 1.23
}
```

#### ‚≠ê –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
```http
POST /api/voice/feedback
Content-Type: application/json

{
  "log_id": 42,
  "rating": 5,
  "feedback_text": "–û—Ç–ª–∏—á–Ω—ã–π –æ—Ç–≤–µ—Ç!"
}
```

#### üìä –°—Ç–∞—Ç—É—Å —Å–∞–º–æ–æ–±—É—á–µ–Ω–∏—è
```http
GET /api/voice/self-learning/status

Response:
{
  "total_interactions": 1247,
  "avg_rating": 4.2,
  "positive_ratings_count": 890,
  "negative_ratings_count": 45,
  "current_model": "gpt-4-mini",
  "requires_retraining": false
}
```

#### üîç –ü–æ—Ö–æ–∂–∏–µ –æ—Ç–≤–µ—Ç—ã
```http
GET /api/voice/similar/42?limit=5

Response: [
  {
    "log_id": 38,
    "user_message": "–ö–∞–∫ —á–∞—Å—Ç–æ —É–±–∏—Ä–∞—Ç—å?",
    "ai_response": "–£–±–æ—Ä–∫–∞ –ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è...",
    "similarity_score": 0.87,
    "rating": 5
  }
]
```

## üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
```bash
cd backend

# –≠–∫—Å–ø–æ—Ä—Ç –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ –æ—Ü–µ–Ω–µ–Ω–Ω—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤
python -m training.export_logs --min-rating 4 --days-back 30 --max-samples 5000

# –†–µ–∑—É–ª—å—Ç–∞—Ç: training/data/training_data_20250109_143022.jsonl
```

### 2. –î–æ–æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
```bash
# –ó–∞–ø—É—Å–∫ –¥–æ–æ–±—É—á–µ–Ω–∏—è
python -m training.fine_tune \
  --data training/data/training_data_20250109_143022.jsonl \
  --model microsoft/DialoGPT-medium \
  --epochs 3 \
  --batch-size 4 \
  --learning-rate 5e-5

# –ú–æ–¥–µ–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ models/fine_tuned/
```

### 3. –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é –º–æ–¥–µ–ª—å
```bash
# –í .env —Ñ–∞–π–ª–µ
USE_LOCAL_MODEL=true
LOCAL_MODEL_PATH=models/fine_tuned/

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
sudo supervisorctl restart backend
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ü–µ–Ω–∫–∏
```bash
# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ crontab
crontab -e

# –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –º–æ–¥–µ–ª–∏ (–∫–∞–∂–¥–æ–µ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –≤ 2:00)
0 2 * * 0 cd /app/backend && python -m deploy.cron_tasks evaluate_model

# –ï–∂–µ–º–µ—Å—è—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è (1 —á–∏—Å–ª–∞ –≤ 3:00)
0 3 1 * * cd /app/backend && python -m deploy.cron_tasks check_retraining
```

### 5. –†—É—á–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –∏ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ
```bash
cd backend

# –û—Ü–µ–Ω–∫–∞ —Ç–µ–∫—É—â–µ–π –º–æ–¥–µ–ª–∏
python -m deploy.cron_tasks evaluate_model

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è
python -m deploy.cron_tasks check_retraining
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏

### –ö–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:
- **–°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥** - –æ—Ç 1 –¥–æ 5 –∑–≤–µ–∑–¥
- **–ü–æ–∫—Ä—ã—Ç–∏–µ –æ—Ü–µ–Ω–∫–∞–º–∏** - % –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º
- **–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å** - % –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö –æ—Ü–µ–Ω–æ–∫ (4-5‚òÖ)
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞** - —Å–∫–æ—Ä–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- **–¢–æ—á–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞** - –∫–∞—á–µ—Å—Ç–≤–æ –ø–æ—Ö–æ–∂–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤

### –ü–æ—Ä–æ–≥–∏ –¥–ª—è –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è:
- –°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ < 3.5
- –£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å < 60%
- –ù–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö –æ—Ü–µ–Ω–æ–∫ > 20%

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
```http
GET /api/voice/health

Response:
{
  "status": "healthy",
  "components": {
    "ai_service": true,
    "embedding_service": true,
    "local_model": false,
    "database": true
  }
}
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
```http
POST /api/voice/embeddings/update?batch_size=100

Response:
{
  "success": true,
  "processed": 85,
  "errors": 2,
  "total_found": 87
}
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

### –î–æ —Å–∞–º–æ–æ–±—É—á–µ–Ω–∏—è:
- –°—Ç–∞—Ç–∏—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã GPT-4 mini
- –ù–µ—Ç –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –∫ –¥–æ–º–µ–Ω—É
- –í—ã—Å–æ–∫–∏–µ –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ API

### –ü–æ—Å–ª–µ —Å–∞–º–æ–æ–±—É—á–µ–Ω–∏—è:
- **+40% –∫–∞—á–µ—Å—Ç–≤–∞** –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –æ—Ü–µ–Ω–∫–∞–º
- **-60% –∑–∞—Ç—Ä–∞—Ç** –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è** –∫ —Å–ø–µ—Ü–∏—Ñ–∏–∫–µ –∫–ª–∏–Ω–∏–Ω–≥–æ–≤–æ–π –∫–æ–º–ø–∞–Ω–∏–∏
- **–ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –∑–Ω–∞–Ω–∏–π** –∏–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤

## üöÄ Roadmap —Ä–∞–∑–≤–∏—Ç–∏—è

### –§–∞–∑–∞ 3 (–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è):
- **Multimodal –æ–±—É—á–µ–Ω–∏–µ** - —Ñ–æ—Ç–æ –æ—Ç—á–µ—Ç—ã + —Ç–µ–∫—Å—Ç
- **–§–µ–¥–µ—Ä–∞—Ç–∏–≤–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ** - –æ–±—É—á–µ–Ω–∏–µ –±–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- **A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏–π –º–æ–¥–µ–ª–∏
- **Real-time –æ–±—É—á–µ–Ω–∏–µ** - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

### –§–∞–∑–∞ 4 (–ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞):
- **Reinforcement Learning** - –æ–±—É—á–µ–Ω–∏–µ —Å –ø–æ–¥–∫—Ä–µ–ø–ª–µ–Ω–∏–µ–º
- **Knowledge Graphs** - –≥—Ä–∞—Ñ—ã –∑–Ω–∞–Ω–∏–π –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è
- **Multi-agent —Å–∏—Å—Ç–µ–º—ã** - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ AI –∞–≥–µ–Ω—Ç—ã

---

**üéâ –ú–æ–¥—É–ª—å —Å–∞–º–æ–æ–±—É—á–µ–Ω–∏—è –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç VasDom AudioBot –≤ –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É —É–º–Ω—É—é —Å–∏—Å—Ç–µ–º—É, –∫–æ—Ç–æ—Ä–∞—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ª—É—á—à–µ —Å –∫–∞–∂–¥—ã–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ–º!**