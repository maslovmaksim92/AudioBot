# ü§ñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é Telegram –±–æ—Ç–∞ –¥–ª—è –±—Ä–∏–≥–∞–¥

## –¶–µ–ª—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª: –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ –±—Ä–∏–≥–∞–¥–æ–π ‚Üí –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å—Ç–∞ —Å AI-–ø–æ–¥–ø–∏—Å—å—é –æ—Ç GPT-4o-mini

## –§–æ—Ä–º–∞—Ç –ø–æ–¥–ø–∏—Å–∏ (–∫–∞–∫ –≤ PostingFotoTG)
```
üßπ –£–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
üè† –ê–¥—Ä–µ—Å: [–∞–¥—Ä–µ—Å –¥–æ–º–∞]
üìÖ –î–∞—Ç–∞: [–¥–µ–Ω—å –º–µ—Å—è—Ü –≥–æ–¥]
üë∑ –ë—Ä–∏–≥–∞–¥–∞: #[–Ω–æ–º–µ—Ä]

[–ú–æ—Ç–∏–≤–∏—Ä—É—é—â–∏–π —Ç–µ–∫—Å—Ç –æ—Ç GPT-4o-mini –ø—Ä–æ —á–∏—Å—Ç–æ—Ç—É, –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –±—Ä–∏–≥–∞–¥–µ, 3-5 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π]
#–ß–∏—Å—Ç–æ—Ç–∞ #–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å #–°–æ—Ü–∏–∞–ª—å–Ω–∞—è–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å #–ö–∞–ª—É–≥–∞
```

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. Webhook Telegram
–ë–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ webhook:
```bash
curl -X POST "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/setWebhook" \
  -d "url=https://vasdom-finance-1.preview.emergentagent.com/api/telegram-webhook/"
```

### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–∞ Render)
–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
- `TELEGRAM_BOT_TOKEN` - —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
- `OPENAI_API_KEY` - –∫–ª—é—á OpenAI (—É–∂–µ –µ—Å—Ç—å –Ω–∞ Render)
- `TELEGRAM_TARGET_CHAT_ID` - ID –≥—Ä—É–ø–ø—ã –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ (–±—É–¥–µ—Ç –≤ –ò—Ç–µ—Ä–∞—Ü–∏–∏ 2, –ø–æ–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º)

## –¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π

### –®–∞–≥ 1: –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –ø–æ username –∏–ª–∏ —Å—Å—ã–ª–∫–µ
3. –ù–∞–∂–º–∏—Ç–µ `/start`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üè† –í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–º –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ:

üìÖ –°–µ–≥–æ–¥–Ω—è: 12.10.2025
üìç –î–æ–º–æ–≤ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è: 3

[–ö–Ω–æ–ø–∫–∏ —Å –∞–¥—Ä–µ—Å–∞–º–∏:]
- —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 10, –ø–æ–¥—ä–µ–∑–¥ 1
- —É–ª. –ü—É—à–∫–∏–Ω–∞, –¥. 25, –ø–æ–¥—ä–µ–∑–¥—ã 1-3
- –ø—Ä. –ú–∏—Ä–∞, –¥. 5, –ø–æ–¥—ä–µ–∑–¥—ã 1-4
```

### –®–∞–≥ 2: –í—ã–±–æ—Ä –¥–æ–º–∞
1. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ª—é–±–æ–π –∞–¥—Ä–µ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, "—É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 10, –ø–æ–¥—ä–µ–∑–¥ 1")

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –í—ã–±—Ä–∞–Ω –¥–æ–º:
üè† —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 10, –ø–æ–¥—ä–µ–∑–¥ 1
üö™ –ü–æ–¥—ä–µ–∑–¥–æ–≤: 1
üìä –≠—Ç–∞–∂–µ–π: 5

üì∏ –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ —É–±–æ—Ä–∫–∏
–ö–æ–≥–¥–∞ –∑–∞–∫–æ–Ω—á–∏—Ç–µ, –Ω–∞–∂–º–∏—Ç–µ /done
```

### –®–∞–≥ 3: –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ 1-3 —Ñ–æ—Ç–æ –ø–æ–¥—ä–µ–∑–¥–∞ (–º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ª—é–±—ã–µ —Ñ–æ—Ç–æ –¥–ª—è —Ç–µ—Å—Ç–∞)
2. –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ñ–æ—Ç–æ –±–æ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç:

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –§–æ—Ç–æ 1 —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ
üè† –î–æ–º: —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 10, –ø–æ–¥—ä–µ–∑–¥ 1

üì∏ –û—Ç–ø—Ä–∞–≤—å—Ç–µ –µ—â—ë —Ñ–æ—Ç–æ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ /done –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
```

### –®–∞–≥ 4: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —É–±–æ—Ä–∫–∏
1. –ù–∞–∂–º–∏—Ç–µ `/done`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚è≥ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é —Ñ–æ—Ç–æ –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é –ø–æ–¥–ø–∏—Å—å...

[–ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ –æ–±—Ä–∞—Ç–Ω–æ —Å AI-–ø–æ–¥–ø–∏—Å—å—é:]

üßπ –£–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
üè† –ê–¥—Ä–µ—Å: —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 10, –ø–æ–¥—ä–µ–∑–¥ 1
üìÖ –î–∞—Ç–∞: 12 –æ–∫—Ç—è–±—Ä—è 2025
üë∑ –ë—Ä–∏–≥–∞–¥–∞: #1

üåü –í–µ–ª–∏–∫–æ–ª–µ–ø–Ω–∞—è —Ä–∞–±–æ—Ç–∞! –°–≤–µ—Ç–ª—ã–π –ø–æ–¥—ä–µ–∑–¥ –Ω–∞ —É–ª–∏—Ü–µ –õ–µ–Ω–∏–Ω–∞ 10 —Ç–µ–ø–µ—Ä—å —Å–∏—è–µ—Ç —á–∏—Å—Ç–æ—Ç–æ–π –±–ª–∞–≥–æ–¥–∞—Ä—è –≤–∞—à–∏–º —É—Å–∏–ª–∏—è–º. –í–∞—à –≤–∫–ª–∞–¥ –≤ —Å–æ–∑–¥–∞–Ω–∏–µ —É—é—Ç–Ω–æ–π –∏ –ø—Ä–∏—è—Ç–Ω–æ–π –æ–±—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–µ–æ—Ü–µ–Ω–∏–º! –°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à–µ —Å—Ç—Ä–µ–º–ª–µ–Ω–∏–µ –∫ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤—É –∏ –∑–∞–±–æ—Ç—É –æ –Ω–∞—à–µ–º –æ–±—â–µ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ. –î–∞–≤–∞–π—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –¥–µ–ª–∞—Ç—å –º–∏—Ä —á–∏—â–µ –∏ –∫—Ä–∞—à–µ –≤–º–µ—Å—Ç–µ! üí™üå∑
#–ß–∏—Å—Ç–æ—Ç–∞ #–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å #–°–æ—Ü–∏–∞–ª—å–Ω–∞—è–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å #–ö–∞–ª—É–≥–∞

[–ó–∞—Ç–µ–º:]

‚úÖ –£–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!
üè† —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 10, –ø–æ–¥—ä–µ–∑–¥ 1
üì∏ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Ñ–æ—Ç–æ: 1

–°–ø–∞—Å–∏–±–æ –∑–∞ —Ä–∞–±–æ—Ç—É! üíô
```

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å (–ò—Ç–µ—Ä–∞—Ü–∏—è 2 - –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º)

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- `/start` - –ø–æ–∫–∞–∑ —Å–ø–∏—Å–∫–∞ –¥–æ–º–æ–≤ –¥–ª—è –±—Ä–∏–≥–∞–¥—ã
- Inline –∫–Ω–æ–ø–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ –¥–æ–º–∞
- –ü—Ä–∏—ë–º –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–æ—Ç–æ
- `/done` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è AI –ø–æ–¥–ø–∏—Å–∏ —á–µ—Ä–µ–∑ GPT-4o-mini
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ –æ–±—Ä–∞—Ç–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å –ø–æ–¥–ø–∏—Å—å—é (–¢–ï–°–¢–û–í–´–ô –†–ï–ñ–ò–ú)

### ‚ö†Ô∏è –ú–æ–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (–±—É–¥–µ—Ç –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ):
- –°–ø–∏—Å–æ–∫ –¥–æ–º–æ–≤ (—Å–µ–π—á–∞—Å —Ö–∞—Ä–¥–∫–æ–¥, –±—É–¥–µ—Ç –∏–∑ –ë–î –ø–æ –±—Ä–∏–≥–∞–¥–µ)
- –ë—Ä–∏–≥–∞–¥–∞ (—Å–µ–π—á–∞—Å "–ë—Ä–∏–≥–∞–¥–∞ #1", –±—É–¥–µ—Ç –∏–∑ user_id)
- –¢–∏–ø —É–±–æ—Ä–∫–∏ (—Å–µ–π—á–∞—Å "–í–ª–∞–∂–Ω–∞—è —É–±–æ—Ä–∫–∞", –±—É–¥–µ—Ç –∏–∑ –≥—Ä–∞—Ñ–∏–∫–∞)

### üîú –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–ò—Ç–µ—Ä–∞—Ü–∏—è 2 –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ):
1. –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram –≥—Ä—É–ø–ø—É (–Ω–µ –æ–±—Ä–∞—Ç–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é)
2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ PostgreSQL —Ç–∞–±–ª–∏—Ü—É `cleaning_photos`
3. –í–µ–±—Ö—É–∫ –≤ Bitrix24 ‚Üí email –£–ö
4. –†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î (–±—Ä–∏–≥–∞–¥—ã, –¥–æ–º–∞, –≥—Ä–∞—Ñ–∏–∫–∏)

## Troubleshooting

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook:
   ```bash
   curl "https://api.telegram.org/bot<TOKEN>/getWebhookInfo"
   ```
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend:
   ```bash
   tail -f /var/log/supervisor/backend.out.log | grep telegram
   ```

### AI –ø–æ–¥–ø–∏—Å—å –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è (fallback)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `OPENAI_API_KEY` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ Render
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `grep "photo_caption" /var/log/supervisor/backend.out.log`
- Fallback –ø–æ–¥–ø–∏—Å—å –≤—Å—ë —Ä–∞–≤–Ω–æ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞

### –§–æ—Ç–æ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—ã–±—Ä–∞–Ω –¥–æ–º —á–µ—Ä–µ–∑ `/start` –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π —Ñ–æ—Ç–æ
- –°–µ—Å—Å–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ (–ø—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–µ backend —Ç–µ—Ä—è–µ—Ç—Å—è)

## API endpoints

### Webhook
- **URL**: `https://vasdom-finance-1.preview.emergentagent.com/api/telegram-webhook/`
- **–ú–µ—Ç–æ–¥**: POST
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è Telegram –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö

### –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ webhook (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
```bash
curl -X POST "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/setWebhook" \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://vasdom-finance-1.preview.emergentagent.com/api/telegram-webhook/",
    "allowed_updates": ["message", "callback_query"]
  }'
```

## –ü—Ä–∏–º–µ—Ä AI –ø–æ–¥–ø–∏—Å–∏ –æ—Ç GPT-4o-mini

### –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
- –ê–¥—Ä–µ—Å: "—É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 10, –ø–æ–¥—ä–µ–∑–¥ 1"
- –î–∞—Ç–∞: "12 –æ–∫—Ç—è–±—Ä—è 2025"
- –ë—Ä–∏–≥–∞–¥–∞: "#1"

### –í—ã—Ö–æ–¥–Ω–∞—è –ø–æ–¥–ø–∏—Å—å:
```
üßπ –£–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
üè† –ê–¥—Ä–µ—Å: —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 10, –ø–æ–¥—ä–µ–∑–¥ 1
üìÖ –î–∞—Ç–∞: 12 –æ–∫—Ç—è–±—Ä—è 2025
üë∑ –ë—Ä–∏–≥–∞–¥–∞: #1

üåøüßπ‚ú® –°–µ–≥–æ–¥–Ω—è –Ω–∞ —É–ª–∏—Ü–µ –õ–µ–Ω–∏–Ω–∞ 10 –º—ã —Å–¥–µ–ª–∞–ª–∏ –º–∏—Ä –Ω–µ–º–Ω–æ–≥–æ —á–∏—â–µ –∏ —Å–≤–µ—Ç–ª–µ–µ! –ë–ª–∞–≥–æ–¥–∞—Ä–∏–º –Ω–∞—à–∏—Ö —É–±–æ—Ä—â–∏–∫–æ–≤ –∑–∞ –∏—Ö —Ç—Ä—É–¥ –∏ –≤–Ω–∏–º–∞–Ω–∏–µ –∫ –¥–µ—Ç–∞–ª—è–º. –ß–∏—Å—Ç–æ—Ç–∞ –≤ –ø–æ–¥—ä–µ–∑–¥–µ ‚Äî —ç—Ç–æ –∑–∞–±–æ—Ç–∞ –æ –∫–∞–∂–¥–æ–º –∂–∏–ª—å—Ü–µ –∏ —É–≤–∞–∂–µ–Ω–∏–µ –∫ —Å–µ–±–µ. –î–∞–≤–∞–π—Ç–µ –≤–º–µ—Å—Ç–µ –¥–µ–ª–∞—Ç—å –º–∏—Ä –ª—É—á—à–µ! üåüüçÉ
#–ß–∏—Å—Ç–æ—Ç–∞ #–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å #–°–æ—Ü–∏–∞–ª—å–Ω–∞—è–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å #–ö–∞–ª—É–≥–∞
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: `/start` ‚Üí **Backend**: `handle_start_command()`
   - –ü–æ–ª—É—á–∞–µ—Ç –º–æ–∫–æ–≤—ã–π —Å–ø–∏—Å–æ–∫ –¥–æ–º–æ–≤
   - –°–æ–∑–¥–∞—ë—Ç inline keyboard
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏

2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: –ù–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "—É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 10" ‚Üí **Backend**: `handle_house_selection()`
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—ã–±–æ—Ä –≤ —Å–µ—Å—Å–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –≤—ã–±–æ—Ä

3. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ ‚Üí **Backend**: `handle_photo()`
   - –î–æ–±–∞–≤–ª—è–µ—Ç file_id —Ñ–æ—Ç–æ –≤ —Å–µ—Å—Å–∏—é
   - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ

4. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: `/done` ‚Üí **Backend**: `handle_done_command()`
   - –í—ã–∑—ã–≤–∞–µ—Ç `photo_caption_service.format_cleaning_completion_message()`
   - GPT-4o-mini –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–æ—Ç–∏–≤–∏—Ä—É—é—â–∏–π —Ç–µ–∫—Å—Ç
   - –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—É—é –ø–æ–¥–ø–∏—Å—å
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ —Å –ø–æ–¥–ø–∏—Å—å—é –æ–±—Ä–∞—Ç–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (–¢–ï–°–¢–û–í–´–ô –†–ï–ñ–ò–ú)
   - –û—á–∏—â–∞–µ—Ç —Å–µ—Å—Å–∏—é

## –ú–æ–¥–µ–ª–∏ GPT

### GPT-4o-mini
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**: –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–æ—Ç–∏–≤–∏—Ä—É—é—â–µ–≥–æ —Ç–µ–∫—Å—Ç–∞
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: –±—ã—Å—Ç—Ä–∞—è, –¥–µ—à—ë–≤–∞—è, –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –¥–ª—è —Ç–µ–∫—Å—Ç–∞
- **–ü—Ä–æ–º–ø—Ç**: –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–∏–π —Ç–µ–∫—Å—Ç –ø—Ä–æ —É–±–æ—Ä–∫—É –ø–æ–¥—ä–µ–∑–¥–∞
- **–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞**: 0.9 (–±–æ–ª—å—à–µ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏)
- **Max tokens**: 200

### Fallback (–µ—Å–ª–∏ GPT –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≥–æ—Ç–æ–≤—ã–π —à–∞–±–ª–æ–Ω:
```
üåü –í–µ–ª–∏–∫–æ–ª–µ–ø–Ω–∞—è —Ä–∞–±–æ—Ç–∞! –ë–ª–∞–≥–æ–¥–∞—Ä–∏–º –Ω–∞—à—É –∫–æ–º–∞–Ω–¥—É –∑–∞ —Ç—Ä—É–¥ –∏ –≤–Ω–∏–º–∞–Ω–∏–µ –∫ –¥–µ—Ç–∞–ª—è–º. 
–ß–∏—Å—Ç–æ—Ç–∞ –≤ –ø–æ–¥—ä–µ–∑–¥–µ ‚Äî —ç—Ç–æ –∑–∞–±–æ—Ç–∞ –æ –∫–∞–∂–¥–æ–º –∂–∏–ª—å—Ü–µ –∏ —É–≤–∞–∂–µ–Ω–∏–µ –∫ —Å–µ–±–µ. 
–î–∞–≤–∞–π—Ç–µ –≤–º–µ—Å—Ç–µ –¥–µ–ª–∞—Ç—å –º–∏—Ä —á–∏—â–µ –∏ —Å–≤–µ—Ç–ª–µ–µ! üí™üåø
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å**: ‚úÖ –¢–ï–°–¢–û–í–´–ô –†–ï–ñ–ò–ú –†–ê–ë–û–¢–ê–ï–¢

–ë–æ—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ–æ—Ç–æ, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫—Ä–∞—Å–∏–≤—É—é –ø–æ–¥–ø–∏—Å—å —á–µ—Ä–µ–∑ GPT-4o-mini –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –±–æ—Ç–µ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å!

---

**–í–∞–∂–Ω–æ**: –î–ª—è –¥–µ–ø–ª–æ—è –Ω–∞ Render –Ω–µ –∑–∞–±—É–¥—å—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å:
- `TELEGRAM_BOT_TOKEN` –≤ Environment Variables
- `OPENAI_API_KEY` –≤ Environment Variables (—É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω)
