# ‚úÖ Telegram –ë–æ—Ç - –û–±–Ω–æ–≤–ª–µ–Ω –∏ –ì–æ—Ç–æ–≤!

## üéØ –ß—Ç–æ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### 1. ‚úÖ Bitrix24 Integration
- **–û–±–Ω–æ–≤–ª–µ–Ω webhook**: `https://vas-dom.bitrix24.ru/rest/1/f3px6jdizsejzdb0/`
- **Bitrix24 API —Ä–∞–±–æ—Ç–∞–µ—Ç**: –ü–æ–ª—É—á–µ–Ω–æ 50+ —Å–¥–µ–ª–æ–∫
- **–î–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è** –∏–∑ Bitrix24 –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### 2. ‚úÖ –î–æ–º–∞ –Ω–∞ 13.10.2025
- –ë–æ—Ç —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç **—Ä–µ–∞–ª—å–Ω—ã–µ –¥–æ–º–∞ –Ω–∞ 13.10.2025** –∏–∑ Bitrix24
- –ù–∞–π–¥–µ–Ω–æ **10+ –¥–æ–º–æ–≤** –Ω–∞ —ç—Ç—É –¥–∞—Ç—É
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è API: `/api/cleaning/houses?cleaning_date=2025-10-13`

### 3. ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ –ì—Ä—É–ø–ø—ã
- **–ü—É–±–ª–∏—á–Ω–∞—è –≥—Ä—É–ø–ø–∞**: `TELEGRAM_TARGET_CHAT_ID=-1002384210149`
- **–û—Ç—á–µ—Ç–Ω–∞—è –≥—Ä—É–ø–ø–∞**: `TELEGRAM_REPORT_CHAT_ID=-1002384210149`
- –§–æ—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –æ–±–µ –≥—Ä—É–ø–ø—ã + –æ–±—Ä–∞—Ç–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

### 4. ‚úÖ AI –ü–æ–¥–ø–∏—Å–∏
- GPT-4o-mini –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–æ—Ç–∏–≤–∏—Ä—É—é—â–∏–π —Ç–µ–∫—Å—Ç
- –§–æ—Ä–º–∞—Ç –∫–∞–∫ –≤ –ø—Ä–∏–º–µ—Ä–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
```
üßπ –£–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
üè† –ê–¥—Ä–µ—Å: [–∞–¥—Ä–µ—Å]
üìÖ –î–∞—Ç–∞: 12 –æ–∫—Ç—è–±—Ä—è 2025
üë∑ –ë—Ä–∏–≥–∞–¥–∞: #1

üåü [AI –º–æ—Ç–∏–≤–∏—Ä—É—é—â–∏–π —Ç–µ–∫—Å—Ç]

#–ß–∏—Å—Ç–æ—Ç–∞ #–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å #–°–æ—Ü–∏–∞–ª—å–Ω–∞—è–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å #–ö–∞–ª—É–≥–∞
```

---

## üì± –ö–∞–∫ –†–∞–±–æ—Ç–∞–µ—Ç –ë–æ—Ç:

### –ö–æ–º–∞–Ω–¥–∞ /start
1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–æ–º–∞ –Ω–∞ **13.10.2025** –∏–∑ Bitrix24
2. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∏–∑ 10-20 –¥–æ–º–æ–≤ (inline buttons)
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –∞–¥—Ä–µ—Å

**–ü—Ä–∏–º–µ—Ä –¥–æ–º–æ–≤:**
- —É–ª–∏—Ü–∞ –ë–∞—Ä—Ä–∏–∫–∞–¥, 10, –ö–∞–ª—É–≥–∞
- —É–ª–∏—Ü–∞ –ß–∏—á–µ—Ä–∏–Ω–∞, 20, –ö–∞–ª—É–≥–∞
- —É–ª–∏—Ü–∞ –ß–∏—á–µ—Ä–∏–Ω–∞, 14, –∫–∞–ª—É–≥–∞
- –¢–µ–ª–µ–≤–∏–∑–∏–æ–Ω–Ω–∞—è —É–ª–∏—Ü–∞, 26, –ö–∞–ª—É–≥–∞
- –ú–∞–ª–æ—è—Ä–æ—Å–ª–∞–≤–µ—Ü–∫–∞—è —É–ª–∏—Ü–∞, 6, –ö–∞–ª—É–≥–∞
- –∏ –¥—Ä—É–≥–∏–µ...

### –í—ã–±–æ—Ä –¥–æ–º–∞
–ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç:
```
‚úÖ –í—ã–±—Ä–∞–Ω –¥–æ–º:
üè† [–∞–¥—Ä–µ—Å]
üö™ –ü–æ–¥—ä–µ–∑–¥–æ–≤: X
üìä –≠—Ç–∞–∂–µ–π: Y

üì∏ –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ —É–±–æ—Ä–∫–∏
–ö–æ–≥–¥–∞ –∑–∞–∫–æ–Ω—á–∏—Ç–µ, –Ω–∞–∂–º–∏—Ç–µ /done
```

### –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ 1 –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–æ—Ç–æ
- –ë–æ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∫–∞–∂–¥–æ–µ —Ñ–æ—Ç–æ
- –§–æ—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Å–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ö–æ–º–∞–Ω–¥–∞ /done
1. **–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç AI –ø–æ–¥–ø–∏—Å—å** —á–µ—Ä–µ–∑ GPT-4o-mini
2. **–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ –≤ –ø—É–±–ª–∏—á–Ω—É—é –≥—Ä—É–ø–ø—É** —Å –ø–æ–¥–ø–∏—Å—å—é
3. **–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ –≤ –æ—Ç—á–µ—Ç–Ω—É—é –≥—Ä—É–ø–ø—É** (–µ—Å–ª–∏ ID –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è)
4. **–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é** (–¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è)
5. **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ë–î** (—Ç–∞–±–ª–∏—Ü–∞ `cleaning_photos`)

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### .env –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
```bash
# Telegram Bot
TELEGRAM_BOT_TOKEN=8327964029:AAHWtGw08CY2y9Xn4qK_MBobtiwFunQNaik
TELEGRAM_TARGET_CHAT_ID=-1002384210149  # –ü—É–±–ª–∏—á–Ω–∞—è –≥—Ä—É–ø–ø–∞
TELEGRAM_REPORT_CHAT_ID=-1002384210149  # –û—Ç—á–µ—Ç–Ω–∞—è –≥—Ä—É–ø–ø–∞

# Bitrix24
BITRIX24_WEBHOOK_URL=https://vas-dom.bitrix24.ru/rest/1/f3px6jdizsejzdb0/

# OpenAI
OPENAI_API_KEY=sk-proj-lc-AH990fOe-dDzI1_F950lZdfI8-VTB0r1Xd14zxDlrzbqpyA4zeeInG2iL-1
```

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
```
Telegram Bot (@aitest123432_bot)
    ‚Üì
Webhook: audiobot-qci2.onrender.com/api/telegram-webhook/
    ‚Üì
telegram_cleaning_bot.py (–ª–æ–≥–∏–∫–∞ –±–æ—Ç–∞)
    ‚Üì
bitrix24_service.py (–∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ–º–æ–≤ –Ω–∞ 13.10.2025)
    ‚Üì
photo_caption_service.py (AI –ø–æ–¥–ø–∏—Å—å —á–µ—Ä–µ–∑ GPT-4o-mini)
    ‚Üì
–û—Ç–ø—Ä–∞–≤–∫–∞ –≤ –≥—Ä—É–ø–ø—ã + –ë–î
```

---

## üìä –°—Ç–∞—Ç—É—Å –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|-----------|--------|-----------|
| Telegram Bot | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | @aitest123432_bot |
| Webhook | ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω | audiobot-qci2.onrender.com |
| Bitrix24 API | ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω | 50+ —Å–¥–µ–ª–æ–∫ –¥–æ—Å—Ç—É–ø–Ω–æ |
| –î–æ–º–∞ –Ω–∞ 13.10 | ‚úÖ –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è | 10+ –¥–æ–º–æ–≤ –Ω–∞–π–¥–µ–Ω–æ |
| AI –ü–æ–¥–ø–∏—Å–∏ | ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è | GPT-4o-mini |
| –ü—É–±–ª–∏—á–Ω–∞—è –≥—Ä—É–ø–ø–∞ | ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ | -1002384210149 |
| –û—Ç—á–µ—Ç–Ω–∞—è –≥—Ä—É–ø–ø–∞ | ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ | -1002384210149 |
| –ë–î —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | cleaning_photos |

---

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### 1. –ë—Ä–∏–≥–∞–¥—ã –≤ Bitrix24
- –í –¥–∞–Ω–Ω—ã—Ö –∏–∑ Bitrix24 –ø–æ–ª–µ `brigade_label` = `None`
- –ü—Ä–∏—á–∏–Ω–∞: –í Bitrix24 —Å–¥–µ–ª–∫–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±—Ä–∏–≥–∞–¥–∞—Ö
- **–†–µ—à–µ–Ω–∏–µ**: –í—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ —Ñ–∏–ª—å—Ç—Ä—É–µ–º –ø–æ –±—Ä–∏–≥–∞–¥–µ, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ –¥–æ–º–∞ –Ω–∞ 13.10.2025

### 2. OPENAI_API_KEY
- –ö–ª—é—á –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–ø–æ–ª–Ω—ã–º (–≤—ã–≥–ª—è–¥–∏—Ç –æ–±—Ä–µ–∑–∞–Ω–Ω—ã–º)
- –ï—Å–ª–∏ AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback —Ç–µ–∫—Å—Ç
- Fallback —Ç–µ–∫—Å—Ç —Ç–∞–∫–∂–µ –∫—Ä–∞—Å–∏–≤—ã–π –∏ –º–æ—Ç–∏–≤–∏—Ä—É—é—â–∏–π

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç
1. –û—Ç–∫—Ä–æ–π—Ç–µ **@aitest123432_bot** –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
3. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ–º–æ–≤ –Ω–∞ 13.10.2025
4. –í—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–π –∞–¥—Ä–µ—Å
5. –ó–∞–≥—Ä—É–∑–∏—Ç–µ 1-3 —Ñ–æ—Ç–æ
6. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/done`
7. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - ‚úÖ –§–æ—Ç–æ –ø—Ä–∏—à–ª–æ –æ–±—Ä–∞—Ç–Ω–æ —Å AI –ø–æ–¥–ø–∏—Å—å—é
   - ‚úÖ –§–æ—Ç–æ –ø–æ—è–≤–∏–ª–æ—Å—å –≤ –≥—Ä—É–ø–ø–µ (–µ—Å–ª–∏ –≤—ã –≤ –Ω–µ–π)
   - ‚úÖ –§–æ—Ä–º–∞—Ç –ø–æ–¥–ø–∏—Å–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä—É–ø–ø
–ï—Å–ª–∏ –≤—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≥—Ä—É–ø–ø, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –ü—É–±–ª–∏—á–Ω–∞—è –≥—Ä—É–ø–ø–∞: `-1002384210149`
- –û—Ç—á–µ—Ç–Ω–∞—è –≥—Ä—É–ø–ø–∞: `-1002384210149`

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î
```sql
-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–æ—Ç–æ
SELECT * FROM cleaning_photos 
ORDER BY created_at DESC 
LIMIT 5;
```

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –ü—Ä–æ–¥–∞–∫—à–µ–Ω—É!

–ë–æ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±—Ä–∏–≥–∞–¥–∞–º–∏:

1. ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ –¥–æ–º–∞ –Ω–∞ 13.10.2025 –∏–∑ Bitrix24
2. ‚úÖ AI –ø–æ–¥–ø–∏—Å–∏ –≤ –Ω—É–∂–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
3. ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ –æ–±–µ –≥—Ä—É–ø–ø—ã
4. ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
5. ‚úÖ Webhook –∞–∫—Ç–∏–≤–µ–Ω –∏ —Å—Ç–∞–±–∏–ª–µ–Ω

---

## üìû –°–ª–µ–¥—É—é—â–∏–µ –®–∞–≥–∏ (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 1. –î–æ–±–∞–≤–∏—Ç—å ID –æ—Ç—á–µ—Ç–Ω–æ–π –≥—Ä—É–ø–ø—ã
–ï—Å–ª–∏ —É –≤–∞—Å –æ—Ç–¥–µ–ª—å–Ω–∞—è –æ—Ç—á–µ—Ç–Ω–∞—è –≥—Ä—É–ø–ø–∞:
```bash
# –í .env
TELEGRAM_REPORT_CHAT_ID=-1002XXXXXXXXX  # –í–∞—à ID
```

### 2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –±—Ä–∏–≥–∞–¥—ã –≤ Bitrix24
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –≥–¥–µ –≤ Bitrix24 —Ö—Ä–∞–Ω–∏—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±—Ä–∏–≥–∞–¥–∞—Ö
- –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª–µ `assigned_by_name` –≤ —Ñ–æ—Ä–º–∞—Ç–µ "1 –±—Ä–∏–≥–∞–¥–∞", "2 –±—Ä–∏–≥–∞–¥–∞" –∏ —Ç.–¥.
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é

### 3. –í–µ–±—Ö—É–∫ –≤ Bitrix24
–î–æ–±–∞–≤–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É webhook –≤ Bitrix24 –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É–±–æ—Ä–∫–∏:
- URL webhook Bitrix24 –¥–ª—è email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –£–ö
- –î–∞–Ω–Ω—ã–µ: –∞–¥—Ä–µ—Å, –¥–∞—Ç–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ, —Å—Å—ã–ª–∫–∞ –Ω–∞ –≥—Ä—É–ø–ø—É

---

**–ë–æ—Ç –≥–æ—Ç–æ–≤! –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ @aitest123432_bot** üöÄ
