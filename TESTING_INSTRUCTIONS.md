# üß™ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã

## ‚úÖ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

- ‚úÖ Backend –∑–∞–ø—É—â–µ–Ω –Ω–∞ https://audiobot-qci2.onrender.com
- ‚úÖ Webhook endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç: `/api/call-summary/webhook/novofon`
- ‚úÖ Telegram –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ)
- ‚úÖ Webhook –≤ Novofon –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ –ì—Ä—É–ø–ø–∞ Telegram: -5007549435

## üéØ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –í–∞—Ä–∏–∞–Ω—Ç 1: –†–µ–∞–ª—å–Ω—ã–π –∑–≤–æ–Ω–æ–∫ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–°–¥–µ–ª–∞–π—Ç–µ –∑–≤–æ–Ω–æ–∫:**
   - –ü–æ–∑–≤–æ–Ω–∏—Ç–µ **–ù–ê** –Ω–æ–º–µ—Ä +79843330712 (–≤—Ö–æ–¥—è—â–∏–π)
   - –ò–õ–ò –ø–æ–∑–≤–æ–Ω–∏—Ç–µ **–°** –Ω–æ–º–µ—Ä–∞ +79843330712 (–∏—Å—Ö–æ–¥—è—â–∏–π)

2. **–í–∞–∂–Ω–æ:**
   - –ü–æ–≥–æ–≤–æ—Ä–∏—Ç–µ –º–∏–Ω–∏–º—É–º **1-2 –º–∏–Ω—É—Ç—ã** (–¥–ª—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏)
   - –£–ø–æ–º—è–Ω–∏—Ç–µ —á—Ç–æ-—Ç–æ –ø—Ä–æ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å, –±—é–¥–∂–µ—Ç, —Å—Ä–æ–∫–∏
   - –ó–∞–≤–µ—Ä—à–∏—Ç–µ –∑–≤–æ–Ω–æ–∫ –Ω–æ—Ä–º–∞–ª—å–Ω–æ

3. **–û–∂–∏–¥–∞–Ω–∏–µ:**
   - –ü–æ–¥–æ–∂–¥–∏—Ç–µ **2-3 –º–∏–Ω—É—Ç—ã**
   - –°–∏—Å—Ç–µ–º–∞:
     - –ü–æ–ª—É—á–∏—Ç webhook –æ—Ç Novofon
     - –°–∫–∞—á–∞–µ—Ç –∑–∞–ø–∏—Å—å
     - –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä—É–µ—Ç —á–µ—Ä–µ–∑ Whisper (~30 —Å–µ–∫)
     - –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —á–µ—Ä–µ–∑ GPT-4o (~10 —Å–µ–∫)
     - –û—Ç–ø—Ä–∞–≤–∏—Ç –∫–∞—Ä—Ç–æ—á–∫—É –≤ Telegram

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –≥—Ä—É–ø–ø—É **-5007549435**
   - –¢–∞–º –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∫—Ä–∞—Å–∏–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –∑–≤–æ–Ω–∫–∞ —Å:
     - üìû –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∑–≤–æ–Ω–∫–µ
     - üéØ –û—Ü–µ–Ω–∫–æ–π –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏
     - üí∞ –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–º –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–æ–º
     - ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏
     - üìù –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–µ–π

---

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ—Ü–µ—Å—Å–∞

### 1. –õ–æ–≥–∏ Novofon
**–ì–¥–µ:** –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç Novofon ‚Üí –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ ‚Üí –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ–±—ã—Ç–∏—è—Ö ‚Üí –õ–æ–≥–∏

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
POST https://audiobot-qci2.onrender.com/api/call-summary/webhook/novofon
Status: 200 OK
Response: {"status":"accepted","call_id":"..."}
```

**–ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å –ù–ï 200:**
- ‚ùå –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ URL —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚ùå –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω –Ω–∞ Render
- ‚ùå –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—ã–±—Ä–∞–Ω –º–µ—Ç–æ–¥ POST

---

### 2. –õ–æ–≥–∏ –Ω–∞ Render
**–ì–¥–µ:** https://dashboard.render.com ‚Üí audiobot-qci2 ‚Üí Logs

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ—Å–ª–µ –∑–≤–æ–Ω–∫–∞:**
```
üìû Received call webhook from Novofon: call_xxxxx
üéôÔ∏è Transcribing audio...
‚úÖ Transcription completed: XXX characters
ü§ñ Analyzing call with AI...
‚úÖ AI analysis completed
üíæ Saved to database
üì® Sent to Telegram group -5007549435
‚úÖ Call processed successfully!
```

**–ï—Å–ª–∏ –ª–æ–≥–æ–≤ –Ω–µ—Ç:**
- ‚ùå Webhook –Ω–µ –¥–æ—à–µ–ª –¥–æ backend
- ‚ùå –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ Novofon

---

### 3. Telegram –≥—Ä—É–ø–ø–∞
**–ì–¥–µ:** Telegram –≥—Ä—É–ø–ø–∞ -5007549435

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
- –ö—Ä–∞—Å–∏–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –∑–≤–æ–Ω–∫–∞
- –° AI-–∞–Ω–∞–ª–∏–∑–æ–º –∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–µ–π

**–ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ—Ç:**
- ‚ùå –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –≥—Ä—É–ø–ø—É
- ‚ùå –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –±–æ—Ç–∞ (–º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è)
- ‚ùå –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –Ω–∞ Render - —Ç–∞–º –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞

---

## ‚ùì –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: Webhook –Ω–µ –¥–æ—Ö–æ–¥–∏—Ç –¥–æ backend
**–°–∏–º–ø—Ç–æ–º—ã:** –í –ª–æ–≥–∞—Ö Novofon —Å—Ç–∞—Ç—É—Å –ù–ï 200, –≤ –ª–æ–≥–∞—Ö Render –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –≤ Novofon (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–æ—á–Ω–æ):
   ```
   https://audiobot-qci2.onrender.com/api/call-summary/webhook/novofon
   ```
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω:
   ```
   https://audiobot-qci2.onrender.com/api/health
   ```
   –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: `{"ok":true,"ts":...}`

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: Webhook –¥–æ—Ö–æ–¥–∏—Ç, –Ω–æ –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–µ—Ç –≤ Telegram
**–°–∏–º–ø—Ç–æ–º—ã:** –í –ª–æ–≥–∞—Ö Render –µ—Å—Ç—å "Received webhook", –Ω–æ –Ω–µ—Ç "Sent to Telegram"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –Ω–∞ Render - —Ç–∞–º –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞
2. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
   - –ù–µ—Ç –∑–∞–ø–∏—Å–∏ –∑–≤–æ–Ω–∫–∞ (record_url –ø—É—Å—Ç–æ–π)
   - –û—à–∏–±–∫–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ (–ø—Ä–æ–±–ª–µ–º–∞ —Å OpenAI)
   - –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram (–±–æ—Ç –Ω–µ –≤ –≥—Ä—É–ø–ø–µ)

---

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ö–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç –±–µ–∑ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
**–°–∏–º–ø—Ç–æ–º—ã:** –ö–∞—Ä—Ç–æ—á–∫–∞ –µ—Å—Ç—å, –Ω–æ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –ø—É—Å—Ç–∞—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ó–≤–æ–Ω–æ–∫ –±—ã–ª —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–º (–º–µ–Ω—å—à–µ 5 —Å–µ–∫—É–Ω–¥)
2. –ó–∞–ø–∏—Å—å –∑–≤–æ–Ω–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
3. –û—à–∏–±–∫–∞ Whisper API

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### Backend
```bash
curl https://audiobot-qci2.onrender.com/api/health
```
–û–∂–∏–¥–∞–µ—Ç—Å—è: `{"ok":true,"ts":1234567890}`

### Webhook endpoint
```bash
curl -X POST https://audiobot-qci2.onrender.com/api/call-summary/webhook/novofon \
  -H "Content-Type: application/json" \
  -d '{"call_id":"test","caller":"+79001234567","called":"+79843330712","direction":"in","duration":120,"status":"answered"}'
```
–û–∂–∏–¥–∞–µ—Ç—Å—è: `{"status":"accepted","call_id":"test"}`

### Telegram –±–æ—Ç
–û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –±–æ—Ç—É @aitest123432_bot
–î–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å

---

## üÜò –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏ —Å Render:**
   - –ü–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–≤–æ–Ω–∫–∞
   - –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫ –≥–¥–µ –µ—Å—Ç—å "webhook" –∏–ª–∏ "error"

2. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –∏–∑ Novofon:**
   - –†–∞–∑–¥–µ–ª "–õ–æ–≥–∏ webhook"
   - –ü–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–ø—Ä–æ—Å –ø–æ—Å–ª–µ –≤–∞—à–µ–≥–æ –∑–≤–æ–Ω–∫–∞

3. **–°–æ–æ–±—â–∏—Ç–µ –º–Ω–µ:**
   - –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –õ–æ–≥–∏ —Å Render
   - –°–∫—Ä–∏–Ω—à–æ—Ç –∏–∑ Novofon
   - –Ø –ø–æ–º–æ–≥—É —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è!

---

## ‚úÖ –£—Å–ø–µ—à–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–≤–æ–Ω–∫–∞ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:

1. ‚úÖ –í –ª–æ–≥–∞—Ö Novofon: —Å—Ç–∞—Ç—É—Å 200 OK
2. ‚úÖ –í –ª–æ–≥–∞—Ö Render: "Call processed successfully!"
3. ‚úÖ –í Telegram: –∫—Ä–∞—Å–∏–≤—É—é –∫–∞—Ä—Ç–æ—á–∫—É –∑–≤–æ–Ω–∫–∞

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ 24/7!** üéâ

–ö–∞–∂–¥—ã–π –Ω–æ–≤—ã–π –∑–≤–æ–Ω–æ–∫ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –∏ –∫–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–∏–¥–µ—Ç –≤ Telegram.
