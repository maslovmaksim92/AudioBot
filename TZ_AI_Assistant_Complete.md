# **ТЕХНИЧЕСКОЕ ЗАДАНИЕ**
## **Корпоративный AI-ассистент для управления клининговой компанией**

---

## **1. ОБЩАЯ ИНФОРМАЦИЯ**

**Заказчик:** Клининговая компания (уборка подъездов + строительные работы)  
**Проект:** AI-помощник для собственника бизнеса  
**Команда:** 100 сотрудников  
**География:** Калуга (500+ домов), Кемерово (100 домов)  
**Существующая инфраструктура:** 
- Bitrix24 CRM 
- Telegram бот: @aitest123432_bot (токен: 8327964029:AAHBMI1T1Y8ZWLn34wpg92d1-Cb-8RXTSmQ)
- GitHub репозиторий отчетности: PostingFotoTG (рабочий функционал)
- AudioBot: https://audiobot-qci2.onrender.com  

---

## **2. БИЗНЕС-ЦЕЛИ И ЗАДАЧИ**

### **Основная проблема:**
- Нарушенные коммуникации внутри компании
- Отсутствие контроля задач и процессов
- Необходимость постоянного мониторинга сотрудников
- Потребность в автоматизации повторяющихся процессов
- **НОВЫЕ ПРОБЛЕМЫ:**
  - Отсутствие коммуникаций с клиентами и подрядчиками
  - Неэффективное использование контента (фото/видео работ)
  - Отсутствие анализа планерок и собраний
  - Нехватка обратной связи от сотрудников
  - Слабый маркетинг и финансовая аналитика план/факт

### **Цель проекта:**
Создать **"доверенного AI-компаньона"** собственника, который:
- Обеспечивает 360° контроль бизнеса и бизнес-процессов 24/7
- Автоматизирует рутинные операции
- Предоставляет аналитику и предложения по оптимизации
- Интегрируется во все операционные процессы
- **Создает маркетинговый контент** из рабочих материалов
- **Ведет бухгалтерский план/факт анализ**
- **Анализирует планерки** и генерирует actionable insights

### **Детализация команды (100 сотрудников):**
- 👩‍💼 **Управление:** Генеральный директор (1), Директор (1)
- 🧮 **Финансы:** Бухгалтер (1) 
- 👥 **HR:** Менеджер по персоналу (2)
- 🏢 **Клининг:** Менеджер по клинингу (7), Уборщицы (60)
- 🏗️ **Строительство:** Менеджер по стройке (3), Архитектор-сметчик (1)
- 🎯 **Остальные сотрудники:** (25)

### **Ключевые задачи MVP:**
1. **Мониторинг сотрудников** - отслеживание активности, формирование профилей
2. **Интеграция с Bitrix24** - полный доступ к CRM, звонкам, задачам
3. **AI-анализ коммуникаций** - расшифровка звонков, анализ эффективности
4. **Telegram-интерфейс** - мгновенный доступ к данным и управлению
5. **Предиктивная аналитика** - предложения по улучшению процессов

---

## **3. ФУНКЦИОНАЛЬНЫЕ ТРЕБОВАНИЯ**

### **3.1 Модуль мониторинга сотрудников**

**Отслеживание активности ПК:**
- ✅ Мониторинг активных приложений и окон
- ✅ Время работы в различных программах
- ✅ Анализ продуктивности (рабочие/нерабочие активности)
- ✅ Скриншоты экрана (по расписанию или триггерам)
- ✅ Клавиатурная и мышиная активность

**База данных сотрудников:**
- 📊 Персональный профиль каждого сотрудника
- 📊 История активности и продуктивности
- 📊 KPI и метрики эффективности
- 📊 Отчеты по выполнению задач
- 📊 Паттерны поведения и рекомендации

### **3.2 Интеграция с Bitrix24**

**Полный доступ к экосистеме:**
- 🔗 CRM: клиенты, сделки, контакты
- 🔗 Задачи: создание, назначение, контроль
- 🔗 Звонки: запись, анализ, отчеты
- 🔗 Воронки продаж: анализ и оптимизация
- 🔗 Календарь: планирование и напоминания
- 🔗 Документооборот: файлы, договоры

**Автоматизация через AI:**
- 🤖 Автоматическое создание задач из звонков
- 🤖 Классификация клиентов по поведению
- 🤖 Предложения по улучшению воронки
- 🤖 Автоматические отчеты для руководства

### **3.3 Анализ коммуникаций**

**Обработка звонков:**
- 🎙️ Автоматическая расшифровка (Whisper AI)
- 🎙️ Sentiment анализ (настроение клиента)
- 🎙️ Извлечение ключевых тем и проблем
- 🎙️ Оценка качества обслуживания
- 🎙️ Выявление возражений и паттернов

**Массовая обработка:**
- 📞 Анализ всех записанных звонков в Bitrix24
- 📞 Интеграция с телефонией (Новофон)
- 📞 Входящие/исходящие звонки
- 📞 Статистика по менеджерам

### **3.4 Telegram-интерфейс**

**Возможности бота:**
- 💬 Текстовые запросы и ответы
- 🗣️ Голосовые сообщения (TTS/STT)
- 📊 Мгновенные отчеты по запросу
- ⚙️ Управление Bitrix24 из чата
- 📱 Уведомления о важных событиях
- 🔍 Поиск по базе знаний

**Команды для собственника:**
```
/report_today - отчет за день
/employee_status - статус всех сотрудников  
/calls_analysis - анализ звонков
/tasks_control - контроль задач
/productivity - аналитика продуктивности
/bitrix_query [запрос] - любой запрос к Bitrix24
```

### **3.5 Web-интерфейс (Dashboard)**

**Панель собственника:**
- 📈 Real-time мониторинг всех процессов
- 📈 Аналитика по сотрудникам
- 📈 Финансовые показатели
- 📈 Прогнозы и рекомендации
- 📈 Управление настройками AI

**Интерфейс для сотрудников:**
- 👤 Персональный кабинет
- 👤 База знаний компании
- 👤 Задачи и уведомления
- 👤 Статистика работы

---

## **4. ТЕХНИЧЕСКАЯ АРХИТЕКТУРА**

### **4.1 Компоненты системы**

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   PC Agent      │    │   Telegram Bot  │    │   Web Dashboard │
│   (Monitoring)  │    │   (Interface)   │    │   (Frontend)    │
└─────────────────┘    └─────────────────┘    └─────────────────┘
         │                       │                       │
         └───────────────────────┼───────────────────────┘
                                 │
         ┌─────────────────────────────────────────────────┐
         │              AI Core Backend                    │
         │  ┌─────────────┐  ┌─────────────┐  ┌─────────┐ │
         │  │   AI Engine │  │  API Gateway│  │ Database│ │
         │  │   (OpenAI)  │  │             │  │ (Postgres)│ │
         │  └─────────────┘  └─────────────┘  └─────────┘ │
         └─────────────────────────────────────────────────┘
                                 │
         ┌─────────────────────────────────────────────────┐
         │              External Integrations             │
         │  ┌─────────────┐  ┌─────────────┐  ┌─────────┐ │
         │  │   Bitrix24  │  │   Novofon   │  │  GitHub │ │
         │  │    API      │  │   Telephony │  │   API   │ │
         │  └─────────────┘  └─────────────┘  └─────────┘ │
         └─────────────────────────────────────────────────┘
```

### **4.2 Технологический стек**

**Backend:**
- **Framework:** FastAPI (Python 3.11+)
- **AI/ML:** OpenAI API (GPT-4, Whisper, TTS)
- **Database:** PostgreSQL 15+
- **Cache:** Redis
- **Task Queue:** Celery
- **Authentication:** JWT tokens

**Frontend:**
- **Framework:** React 18 + TypeScript
- **UI Library:** Material-UI / Ant Design
- **State Management:** Zustand/Redux Toolkit
- **Charts:** Chart.js / D3.js

**PC Agent:**
- **Language:** Python
- **GUI Monitoring:** pygetwindow, psutil
- **Screenshots:** Pillow, mss
- **Communication:** WebSocket

**Integrations:**
- **Bitrix24:** REST API
- **Telegram:** python-telegram-bot
- **Telephony:** Novofon API
- **AI:** OpenAI Python SDK

---

## **5. БАЗА ДАННЫХ (ER-диаграмма)**

### **Основные таблицы:**

```sql
-- Сотрудники
CREATE TABLE employees (
    id UUID PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    position VARCHAR(100),
    email VARCHAR(255) UNIQUE,
    telegram_id BIGINT UNIQUE,
    bitrix_user_id INTEGER,
    hire_date DATE,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT NOW()
);

-- Активность сотрудников
CREATE TABLE employee_activity (
    id UUID PRIMARY KEY,
    employee_id UUID REFERENCES employees(id),
    application_name VARCHAR(255),
    window_title VARCHAR(500),
    start_time TIMESTAMP,
    end_time TIMESTAMP,
    duration_seconds INTEGER,
    productivity_score FLOAT,
    screenshot_path VARCHAR(500),
    created_at TIMESTAMP DEFAULT NOW()
);

-- Звонки
CREATE TABLE calls (
    id UUID PRIMARY KEY,
    bitrix_call_id VARCHAR(100) UNIQUE,
    employee_id UUID REFERENCES employees(id),
    client_phone VARCHAR(20),
    client_name VARCHAR(255),
    direction ENUM('incoming', 'outgoing'),
    duration_seconds INTEGER,
    recording_url VARCHAR(500),
    transcription TEXT,
    sentiment_score FLOAT,
    key_topics JSON,
    call_quality_score FLOAT,
    created_at TIMESTAMP DEFAULT NOW()
);

-- База знаний
CREATE TABLE knowledge_base (
    id UUID PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    content TEXT,
    category VARCHAR(100),
    tags VARCHAR(255),
    author_id UUID REFERENCES employees(id),
    is_public BOOLEAN DEFAULT false,
    version INTEGER DEFAULT 1,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- Задачи и контроль
CREATE TABLE tasks (
    id UUID PRIMARY KEY,
    bitrix_task_id INTEGER UNIQUE,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    assigned_to UUID REFERENCES employees(id),
    created_by UUID REFERENCES employees(id),
    status VARCHAR(50),
    priority VARCHAR(20),
    due_date TIMESTAMP,
    completed_at TIMESTAMP,
    ai_analysis JSON,
    created_at TIMESTAMP DEFAULT NOW()
);

-- AI отчеты и аналитика
CREATE TABLE ai_reports (
    id UUID PRIMARY KEY,
    report_type VARCHAR(100),
    employee_id UUID REFERENCES employees(id),
    data JSON,
    insights TEXT,
    recommendations TEXT,
    confidence_score FLOAT,
    created_at TIMESTAMP DEFAULT NOW()
);
```

---

## **6. API ENDPOINTS**

### **6.1 Мониторинг сотрудников**
```
GET    /api/employees/{id}/activity/today
GET    /api/employees/{id}/productivity/week
POST   /api/employees/{id}/activity/log
GET    /api/dashboard/productivity/overview
```

### **6.2 Bitrix24 интеграция**
```
GET    /api/bitrix/calls/recent
POST   /api/bitrix/tasks/create
GET    /api/bitrix/deals/pipeline
PUT    /api/bitrix/crm/update
```

### **6.3 AI анализ**
```
POST   /api/ai/calls/analyze
GET    /api/ai/reports/generate
POST   /api/ai/recommendations/get
GET    /api/ai/insights/productivity
```

### **6.4 Telegram интеграция**
```
POST   /api/telegram/webhook
GET    /api/telegram/reports/{type}
POST   /api/telegram/commands/execute
```

---

## **7. НЕФУНКЦИОНАЛЬНЫЕ ТРЕБОВАНИЯ**

### **7.1 Производительность**
- ⚡ Ответ API: < 500ms для простых запросов
- ⚡ AI анализ звонка: < 30 секунд
- ⚡ Dashboard загрузка: < 2 секунд
- ⚡ Telegram bot ответ: < 5 секунд

### **7.2 Масштабируемость**
- 👥 Поддержка до 50 сотрудников
- 📞 Обработка до 1000 звонков/день
- 💾 Хранение данных за 2 года
- 🔄 Возможность горизонтального масштабирования

### **7.3 Безопасность**
- 🔒 Шифрование данных (AES-256)
- 🔒 HTTPS для всех соединений
- 🔒 JWT токены с ротацией
- 🔒 Разграничение ролей и доступа
- 🔒 Аудит всех действий

---

## **8. ПЛАН РАЗРАБОТКИ (ROADMAP)**

### **Фаза 1: MVP (1-2 месяца)**
**Неделя 1-2:**
- [x] Настройка инфраструктуры (Docker, БД)
- [x] Базовая архитектура backend
- [x] Telegram bot (базовая функциональность)

**Неделя 3-4:**
- [ ] PC Agent для мониторинга
- [ ] Интеграция с OpenAI API
- [ ] Базовый веб-интерфейс

**Неделя 5-6:**
- [ ] Интеграция с Bitrix24
- [ ] Система аутентификации
- [ ] Базовая аналитика

**Неделя 7-8:**
- [ ] Расшифровка звонков
- [ ] Первые AI-отчеты
- [ ] Тестирование MVP

### **Фаза 2: Расширенная функциональность (1 месяц)**
- [ ] Продвинутая аналитика
- [ ] Предиктивные модели
- [ ] Автоматизация задач
- [ ] Мобильная адаптация

### **Фаза 3: Оптимизация и масштабирование (1 месяц)**
- [ ] Производительность
- [ ] Дополнительные интеграции
- [ ] Расширенный AI функционал
- [ ] Документация и обучение

---

## **9. РИСКИ И МИТИГАЦИЯ**

| Риск | Вероятность | Влияние | Митигация |
|------|-------------|---------|-----------|
| Ограничения Bitrix24 API | Средняя | Высокое | Изучение документации, тест-интеграции |
| Превышение лимитов OpenAI | Высокая | Среднее | Мониторинг использования, альтернативы |
| Сопротивление сотрудников | Средняя | Высокое | Обучение, постепенное внедрение |
| Проблемы с производительностью | Низкая | Высокое | Нагрузочное тестирование, оптимизация |

---

## **10. КРИТЕРИИ ПРИЕМКИ MVP**

### **Обязательные функции:**
- ✅ PC Agent собирает данные активности
- ✅ Telegram bot отвечает на базовые запросы
- ✅ Интеграция с Bitrix24 работает
- ✅ Расшифровка звонков функционирует
- ✅ Веб-интерфейс доступен сотрудникам
- ✅ База данных сотрудников заполнена
- ✅ Базовые отчеты генерируются

### **Метрики успеха:**
- 📊 90% точность расшифровки звонков
- 📊 Время ответа бота < 5 секунд
- 📊 Доступность системы > 99%
- 📊 Удовлетворенность пользователей > 4/5

---

## **11. БЮДЖЕТ И РЕСУРСЫ**

### **Разработка:**
- Backend разработчик: 2 месяца
- Frontend разработчик: 1.5 месяца  
- DevOps: 0.5 месяца

### **Инфраструктура (ежемесячно):**
- Сервер: $100-200
- OpenAI API: $200-500
- Хранилище: $50
- Мониторинг: $50

### **Внешние API:**
- Bitrix24: включено в текущий тариф
- Novofon: уточнить тариф
- Telegram: бесплатно

---

## **12. ЗАКЛЮЧЕНИЕ**

Данное ТЗ описывает создание **comprehensive AI-ассистента** для управления клининговой компанией. Система будет служить "цифровым заместителем" собственника, обеспечивая полный контроль над бизнес-процессами и непрерывную оптимизацию операций.

**Ключевые преимущества:**
- 🎯 360° видимость бизнес-процессов
- 🚀 Автоматизация рутинных операций  
- 📊 Data-driven принятие решений
- 💼 Освобождение времени собственника
- 📈 Повышение продуктивности команды

---

**Дата создания:** `[ЗАПОЛНИТЬ]`  
**Версия:** 1.0  
**Статус:** На согласовании  
**Ответственный:** `[ЗАПОЛНИТЬ]`

---
