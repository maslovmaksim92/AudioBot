{
  "total_tests": 38,
  "passed": 32,
  "failed": 3,
  "warnings": 3,
  "success_rate": 84.21052631578947,
  "results": [
    {
      "test": "Bot Token Configuration",
      "status": "PASS",
      "details": "Token configured: 8327964628...",
      "timestamp": "2025-09-06T07:12:58.948465"
    },
    {
      "test": "AI Service Key",
      "status": "PASS",
      "details": "Emergent key configured: sk-emergent-0A4...",
      "timestamp": "2025-09-06T07:12:58.948505"
    },
    {
      "test": "Bitrix24 Webhook",
      "status": "PASS",
      "details": "Webhook configured: https://vas-dom.bitrix24.ru/rest/1/R1qMvqyRcQuvgM",
      "timestamp": "2025-09-06T07:12:58.948531"
    },
    {
      "test": "Telegram Bot Connection",
      "status": "FAIL",
      "details": "HTTP 401",
      "timestamp": "2025-09-06T07:13:00.778700"
    },
    {
      "test": "AI Chat Functionality",
      "status": "PASS",
      "details": "AI responded: Привет! Я проанализировал текущие показатели компа...",
      "timestamp": "2025-09-06T07:13:05.152582"
    },
    {
      "test": "AI Business Insights",
      "status": "PASS",
      "details": "Generated 5 insights",
      "timestamp": "2025-09-06T07:13:10.023880"
    },
    {
      "test": "Bitrix24 Connection",
      "status": "FAIL",
      "details": "Invalid response from Bitrix24",
      "timestamp": "2025-09-06T07:13:10.655940"
    },
    {
      "test": "Bitrix24 Statistics",
      "status": "PASS",
      "details": "Retrieved stats: 0 deals, 0 contacts",
      "timestamp": "2025-09-06T07:13:11.239456"
    },
    {
      "test": "Bitrix24 Deals Retrieval",
      "status": "PASS",
      "details": "Retrieved 0 deals",
      "timestamp": "2025-09-06T07:13:11.439226"
    },
    {
      "test": "Bitrix24 Pipeline Detection",
      "status": "WARN",
      "details": "No cleaning pipeline found",
      "timestamp": "2025-09-06T07:13:11.635651"
    },
    {
      "test": "Main Menu Creation",
      "status": "PASS",
      "details": "Menu has 4 rows",
      "timestamp": "2025-09-06T07:13:13.337477"
    },
    {
      "test": "Feedback Keyboard",
      "status": "PASS",
      "details": "Feedback keyboard has 3 buttons",
      "timestamp": "2025-09-06T07:13:13.337667"
    },
    {
      "test": "Improvement Button Implementation",
      "status": "PASS",
      "details": "Button code found in ai_chat_handler (lines 332-336)",
      "timestamp": "2025-09-06T07:13:13.337712"
    },
    {
      "test": "Backend Root Endpoint",
      "status": "PASS",
      "details": "API version: 1.0.0",
      "timestamp": "2025-09-06T07:13:13.399664"
    },
    {
      "test": "AI Chat Endpoint",
      "status": "PASS",
      "details": "AI response received: 213 chars",
      "timestamp": "2025-09-06T07:13:14.626967"
    },
    {
      "test": "Bitrix24 Test Endpoint",
      "status": "PASS",
      "details": "Status: error",
      "timestamp": "2025-09-06T07:13:15.100216"
    },
    {
      "test": "Dashboard Endpoint",
      "status": "PASS",
      "details": "Houses: 0, Employees: 0",
      "timestamp": "2025-09-06T07:13:19.483117"
    },
    {
      "test": "Bot Token Loading",
      "status": "PASS",
      "details": "Token loaded successfully",
      "timestamp": "2025-09-06T07:13:19.483564"
    },
    {
      "test": "Bot Instance Creation",
      "status": "PASS",
      "details": "Bot instance created",
      "timestamp": "2025-09-06T07:13:19.483598"
    },
    {
      "test": "Dispatcher Creation",
      "status": "PASS",
      "details": "Dispatcher created",
      "timestamp": "2025-09-06T07:13:19.483621"
    },
    {
      "test": "Bot Webhook Info",
      "status": "WARN",
      "details": "Webhook info error: Telegram server says - Unauthorized",
      "timestamp": "2025-09-06T07:13:19.846352"
    },
    {
      "test": "Suggest Improvement Handler",
      "status": "WARN",
      "details": "Handler not found in dispatcher",
      "timestamp": "2025-09-06T07:13:19.846526"
    },
    {
      "test": "Improvement Button Creation",
      "status": "PASS",
      "details": "Button can be created successfully",
      "timestamp": "2025-09-06T07:13:19.846618"
    },
    {
      "test": "AI Memory - First Message",
      "status": "PASS",
      "details": "Session created with memory: test_memory_1757142799.846677",
      "timestamp": "2025-09-06T07:13:20.939493"
    },
    {
      "test": "AI Memory - Context Retention",
      "status": "PASS",
      "details": "AI remembered 3/5 context items",
      "timestamp": "2025-09-06T07:13:25.344726"
    },
    {
      "test": "Conversation Stats API",
      "status": "PASS",
      "details": "Stats: 2 sessions, 8 messages",
      "timestamp": "2025-09-06T07:13:25.390162"
    },
    {
      "test": "Financial Forecast Generation",
      "status": "FAIL",
      "details": "Invalid response: No deals data available for forecasting",
      "timestamp": "2025-09-06T07:13:25.604887"
    },
    {
      "test": "AI Business Insights",
      "status": "PASS",
      "details": "Generated 7 business insights",
      "timestamp": "2025-09-06T07:13:41.534906"
    },
    {
      "test": "Performance Metrics API",
      "status": "PASS",
      "details": "All metric sections present",
      "timestamp": "2025-09-06T07:13:41.935932"
    },
    {
      "test": "Daily Summary Endpoint",
      "status": "PASS",
      "details": "Summary generation: Failed to send",
      "timestamp": "2025-09-06T07:13:48.638119"
    },
    {
      "test": "Business Alert Endpoint",
      "status": "PASS",
      "details": "Alert generation: Failed to send",
      "timestamp": "2025-09-06T07:13:48.766349"
    },
    {
      "test": "Notification Service Import",
      "status": "PASS",
      "details": "Service imported successfully",
      "timestamp": "2025-09-06T07:13:48.802992"
    },
    {
      "test": "Notification Methods",
      "status": "PASS",
      "details": "Required methods available",
      "timestamp": "2025-09-06T07:13:48.803123"
    },
    {
      "test": "Company Context Integration",
      "status": "PASS",
      "details": "AI included 8/9 company context items",
      "timestamp": "2025-09-06T07:13:52.081678"
    },
    {
      "test": "Company Info API",
      "status": "PASS",
      "details": "Company data available: Клининговая компания ВасДом",
      "timestamp": "2025-09-06T07:13:52.102543"
    },
    {
      "test": "Database Cleanup",
      "status": "PASS",
      "details": "Cleanup completed: {'messages_deleted': 0, 'sessions_deleted': 0}",
      "timestamp": "2025-09-06T07:13:52.123099"
    },
    {
      "test": "Database Manager",
      "status": "PASS",
      "details": "Database manager initialized",
      "timestamp": "2025-09-06T07:13:52.123430"
    },
    {
      "test": "Conversation Manager",
      "status": "PASS",
      "details": "Conversation manager available",
      "timestamp": "2025-09-06T07:13:52.123502"
    }
  ]
}